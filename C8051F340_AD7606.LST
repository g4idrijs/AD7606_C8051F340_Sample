C51 COMPILER V9.01   C8051F340_AD7606                                                      05/03/2015 18:08:33 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE C8051F340_AD7606
OBJECT MODULE PLACED IN C8051F340_AD7606.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE C8051F340_AD7606.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <c8051f340.h>
   2          #include "C8051F340_AD7606.h"
   3          #include "delay24M.h"
   4          #include <intrins.h>
   5          sbit CS=P0^0;
   6          sbit RD=P0^1;
   7          sbit CONVSTA=P0^2;
   8          sbit CONVSTB=P0^3;
   9          sbit BUSY=P0^6;
  10          sbit REST=P0^7;
  11          unsigned char H_Data,L_Data;
  12          unsigned char Data[2];
  13          
  14          unsigned char j;
  15          unsigned char k = 0;
  16          unsigned char TempA, TempB;
  17          unsigned char Busy;
  18          
  19          void AD7606_Init()
  20          {       
  21   1              delay1ms();
  22   1              REST=0;
  23   1              CS=1;
  24   1              CONVSTA=1;
  25   1              CONVSTB=1;
  26   1              RD=1;
  27   1              delay1ms();
  28   1              REST=1;
  29   1              delay10us();
  30   1              //delay1ms();
  31   1              REST=0;
  32   1              delay10us();
  33   1              //delay1ms();
  34   1              
  35   1      }
  36          void AD7606_Read()
  37          {
  38   1              CONVSTA=0;
  39   1              CONVSTB=0;
  40   1              delay10us();
  41   1              CONVSTA=1;
  42   1              CONVSTB=1;
  43   1              delay10us();
  44   1              Busy=BUSY;
  45   1              while(Busy==1)
  46   1              {
  47   2                      delay10us();
  48   2                      Busy=BUSY;
  49   2              }
  50   1              CS = 0;
  51   1              for(j=0; j<1; j++)
  52   1              {
  53   2              for(k=0; k<1; k++)
  54   2              {
  55   3                      TempA=0;
C51 COMPILER V9.01   C8051F340_AD7606                                                      05/03/2015 18:08:33 PAGE 2   

  56   3                      TempB=0;
  57   3                      RD=0;
  58   3                      //TempA = (TempA<<1) + P3;
  59   3                      //TempB = (TempB<<1) + P1;
  60   3                      TempA = P3;
  61   3                      TempB = P1;
  62   3                      RD=1;
  63   3                      Data[0] = TempA;
  64   3                      Data[1] = TempB;
  65   3                      }
  66   2              }
  67   1              CS=1;
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    101    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
