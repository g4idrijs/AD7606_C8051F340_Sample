C51 COMPILER V9.01   C8051F340_AD7606                                                      05/16/2015 17:52:40 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE C8051F340_AD7606
OBJECT MODULE PLACED IN C8051F340_AD7606.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE C8051F340_AD7606.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <c8051f340.h>
   2          #include "C8051F340_AD7606.h"
   3          #include "Delay.h"
   4          #include <intrins.h>
   5          
   6          sbit CS=P0^0;
   7          sbit RD=P0^1;
   8          sbit CONVSTA=P0^2;
   9          sbit CONVSTB=P0^3;
  10          sbit BUSY=P0^6;
  11          sbit REST=P0^7;
  12          sbit OA=P2^4;
  13          sbit OB=P2^5;
  14          sbit OC=P2^6;
  15          sbit RAGE= P2^7;
  16          
  17          U8 Busy;
  18          
  19          U8 xdata out[1024];
  20          U16 t;
  21          U16 i;
  22          
  23          void AD7606_Init()
  24          {
  25   1              delay80us();
  26   1              REST=0;
  27   1              OA=0;OB=0;OC=0;RAGE=0;
  28   1              CS=1;RD=1;
  29   1              CONVSTA=1; CONVSTB=1;
  30   1              REST=1;
  31   1              delay1us(); /* AD7606是高电平复位，要求最小脉宽50ns */
  32   1              REST=0;
  33   1              
  34   1      }                                          
  35          
  36          void AD7606_ContinuesRead()
  37          {
  38   1              t=0;
  39   1              for(i=0;i<512;i++)
  40   1              {
  41   2                      CONVSTA=1; CONVSTB=1;           
  42   2                      Busy=BUSY;
  43   2                      while(Busy==1)
  44   2                      {
  45   3                              Busy=BUSY;
  46   3                      }       
  47   2                      CS=0;RD=0;
  48   2                      out[t*2]=P3;
  49   2                      out[(t++)*2+1]=P1;
  50   2                      RD=1;CS=1;
  51   2                      CONVSTA=0; CONVSTB=0;
  52   2              }               
  53   1      }


C51 COMPILER V9.01   C8051F340_AD7606                                                      05/16/2015 17:52:40 PAGE 2   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    165    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   1029    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
