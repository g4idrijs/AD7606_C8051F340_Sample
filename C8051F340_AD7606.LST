C51 COMPILER V9.01   C8051F340_AD7606                                                      04/29/2015 11:36:29 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE C8051F340_AD7606
OBJECT MODULE PLACED IN C8051F340_AD7606.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE C8051F340_AD7606.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <c8051f340.h>
   2          #include "C8051F340_AD7606.h"
   3          #include "delay24M.h"
   4          #include <intrins.h>
   5          sbit AD7606_CS=P0^0;
   6          sbit AD7606_RD=P0^1;
   7          sbit AD7606_CONVSTA=P0^2;
   8          sbit AD7606_BUSY=P0^3;
   9          sbit AD7606_REST=P0^4;
  10          sbit INT=P0^5;
  11          int byte_num;
  12          unsigned char H_Data,L_Data;
  13          unsigned char Data[16];
  14          
  15          unsigned char j, k;
  16          unsigned short int TempA, TempB;
  17          unsigned char Busy;
  18          
  19          void AD7606_Init()
  20          {       
  21   1              delay1ms();
  22   1              AD7606_REST=0;
  23   1              AD7606_CS=1;
  24   1              AD7606_CONVSTA=1;
  25   1              AD7606_RD=1;
  26   1              delay1ms();
  27   1              AD7606_REST=1;
  28   1              delay1us();
  29   1              AD7606_REST=0;
  30   1              delay1us();
  31   1              
  32   1      }
  33          void AD7606_Read()
  34          {
  35   1              AD7606_CONVSTA=0;
  36   1              delay1us();
  37   1              byte_num=0;
  38   1              AD7606_CONVSTA=1;
  39   1              delay1us();
  40   1      
  41   1              Busy=AD7606_BUSY;
  42   1      
  43   1              while(Busy==1)
  44   1              {
  45   2                      delay1us();
  46   2                      Busy=AD7606_BUSY;
  47   2              }
  48   1      
  49   1              AD7606_CS = 0;
  50   1              for(j=0; j<8; j++)
  51   1              {
  52   2                      TempA=0;
  53   2                      TempB=0;
  54   2                      
  55   2                      AD7606_RD=0;
C51 COMPILER V9.01   C8051F340_AD7606                                                      04/29/2015 11:36:29 PAGE 2   

  56   2                      TempA= P3;
  57   2                      TempB= P1;
  58   2                      AD7606_RD=1;
  59   2                      
  60   2                      Data[byte_num++] =TempA;
  61   2                      Data[byte_num++] =TempB;
  62   2              }
  63   1              AD7606_CS=1;
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    122    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     27    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
